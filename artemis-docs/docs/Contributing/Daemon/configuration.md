---
sidebar_position: 4
description: Daemon configuration
---

# Configuration

Once artemis has completed enrollment it will request a configuration from the remote server. This configuration file can be used to set several options for the daemon. If the server does provide a configuration file to the daemon, then artemis will generate a default config file.

## Configuration Request

The artemis daemon will send a POST request to the configuration URI defined in the server.toml file.

For example, the server.toml file below:
```toml
[server]
url = "http://127.0.0.1"
port = 8000
ignore_ssl = false
enrollment = "endpoint/enroll"
collections = "endpoint/collections"
config = "endpoint/config"
version = 1
key = "my key"
```

the daemon will send a configuration request to the URI **/v1/endpoint/config**.

### Configuration Payload

The artemis daemon will send the following JSON payload when requesting configuration information.

```json
{
    "endpoint_id": "endpoint id generated by the server"
}
```

An example payload is below:

```json
{
    "endpoint_id": "88c4f69e-9953-4530-9bfc-8a71afe9f18e"
}
```

## Configuration Response

The artemis daemon expects a response containing the following:

```json
{
    "config":"base64 TOML config",
    "endpoint_invalid":"boolean value. False means the daemon should re-enroll"
}
```

The daemon configuration TOML file should contain the following fields:
- endpoint_id: ID generated by the server. The daemon receives this ID upon enrollment
- collection_storage: Path where the daemon should store collected data if it cannot upload to the server
- log_level: Logging level for artemis

```toml
[daemon]
endpoint_id = "my important key"
collection_storage = "/var/artemis/collections"
log_level = "warn"
```