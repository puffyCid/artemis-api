"use strict";(self.webpackChunkartemis_docs=self.webpackChunkartemis_docs||[]).push([[2188],{7396:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var n=s(7624),i=s(2172);const r={description:"Timesketch API Support!"},o="Timesketch",a={id:"API/API Scenarios/timesketch",title:"Timesketch",description:"Timesketch API Support!",source:"@site/docs/API/API Scenarios/timesketch.md",sourceDirName:"API/API Scenarios",slug:"/API/API Scenarios/timesketch",permalink:"/artemis-api/docs/API/API Scenarios/timesketch",draft:!1,unlisted:!1,editUrl:"https://github.com/puffyCid/artemis-api/tree/main/artemis-docs/docs/API/API Scenarios/timesketch.md",tags:[],version:"current",lastUpdatedBy:"puffyCid",lastUpdatedAt:1717993766e3,frontMatter:{description:"Timesketch API Support!"},sidebar:"artemisAPI",previous:{title:"Timelines",permalink:"/artemis-api/docs/API/API Scenarios/timelines"}},c={},l=[{value:"Limitations and Possible Issues",id:"limitations-and-possible-issues",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.M)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"timesketch",children:"Timesketch"}),"\n",(0,n.jsx)(t.p,{children:"Using the artemis API you may timeline artifacts and optionally upload to\nTimesketch for analysis."}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://timesketch.org/",children:"Timesketch"})," is an open source timeline analysis web\napplication created by Google."]}),"\n",(0,n.jsx)(t.p,{children:"In order to upload data to Timesketch you will first need to timeline the data."}),"\n",(0,n.jsxs)(t.p,{children:["Currently artemis provides a simple function to help timeline artifacts it can\nparse: ",(0,n.jsx)(t.a,{href:"../Helper/timesketch",children:"timelineArtifact"}),"."]}),"\n",(0,n.jsxs)(t.admonition,{type:"warning",children:[(0,n.jsxs)(t.p,{children:["Just like uploading to the ",(0,n.jsx)(t.a,{href:"/artemis-api/docs/Intro/Collections/uploads",children:"cloud"}),"\ncurrently artemis does not securely protect credentials used to authenticate to\nTimesketch."]}),(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"This is important."})," Timesketch has very limited support for any kind of\naccount permissions. If you create an account for artemis and an unauthorized\nuser obtains the credentials for the account they will be able upload, delete,\netc any data uploaded by artemis."]}),(0,n.jsxs)(t.p,{children:["If you do not want to expose Timesketch credentials, you can\n",(0,n.jsx)(t.a,{href:"/artemis-api/docs/API/API%20Scenarios/timelines",children:"timeline"})," the data to a local directory, network share, or\nexternal drive. Then upload the data using an alternative tool."]})]}),"\n",(0,n.jsx)(t.p,{children:"A sample script below shows how to pull a process listing and upload to\nTimesketch."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:'import { hostname, processListing } from "../../Projects/artemis-api/mod.ts";\nimport { Timesketch } from "../../Projects/artemis-api/src/timesketch/client.ts";\nimport {\n  TimesketchAuth,\n  TimesketchAuthType,\n} from "../../Projects/artemis-api/types/timesketch/client.ts";\nimport { TimesketchArtifact } from "../../Projects/artemis-api/types/timesketch/timeline.ts";\n\nasync function main() {\n  const results = processListing(true, false, false, true);\n  console.log(results.length);\n\n  const auth: TimesketchAuth = {\n    url: "http://192.168.1.193",\n    username: "sketchy",\n    password: "password",\n    verify_ssl: false,\n    auth_type: TimesketchAuthType.CREDS,\n    sketch_id: 1,\n  };\n\n  // Name of timeline\n  const host = hostname();\n  // Create a Timesketch client\n  const client = new Timesketch(auth, host);\n\n  const status = await client.timelineAndUpload(\n    results,\n    TimesketchArtifact.PROCESSESS,\n  );\n  console.log(status);\n}\n\nmain();\n'})}),"\n",(0,n.jsx)(t.p,{children:"A quick walkthrough for this script:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"async function main()"})," Since uploading to Timesketch is an async operation,\nout script has to use async"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"processListing(true, false, false, true);"})," Pull a process listing using\nartemis"]}),"\n",(0,n.jsx)(t.li,{children:"Initialize the Timesketch client."}),"\n"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:'const auth: TimesketchAuth = {\n  url: "http://192.168.1.193",\n  username: "sketchy",\n  password: "password", // Reminder!: Artemis currently does not safely protect credentials\n  verify_ssl: false,\n  auth_type: TimesketchAuthType.CREDS,\n  sketch_id: 1, // Optional\n};\n'})}),"\n",(0,n.jsxs)(t.p,{children:["Specifying the ",(0,n.jsx)(t.strong,{children:"sketch_id"})," is optional. If you do not provide one, artemis\nwill create a new sketch"]}),"\n",(0,n.jsxs)(t.ol,{start:"4",children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"new Timesketch(auth, host);"})," Create our Timesketch client using the ",(0,n.jsx)(t.strong,{children:"auth"}),"\nobject above and system hostname for the timeline name."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Timeline and upload the data to Timesketch!"}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"const status = await client.timelineAndUpload(\n  results,\n  TimesketchArtifact.PROCESSESS,\n);\n"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"A pretty timeline",src:s(6628).c+"",width:"3840",height:"1080"})}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:["Artemis can only execute JavaScript code. You will need to create a\n",(0,n.jsx)(t.a,{href:"/artemis-api/docs/Intro/Scripting/bundling#esbuild",children:"build.ts script"})," before you can run\nthis example."]})}),"\n",(0,n.jsx)(t.h2,{id:"limitations-and-possible-issues",children:"Limitations and Possible Issues"}),"\n",(0,n.jsxs)(t.p,{children:["Timesketch is primarily used to ingest\n",(0,n.jsx)(t.a,{href:"https://github.com/log2timeline/plaso",children:"Plaso"})," files. While it has support for\nuploading other files (csv, excel sheets, and JSONL) it expects that data to be\nuploaded from either:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"WebUI"}),"\n",(0,n.jsx)(t.li,{children:"Python API library"}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Since TypeScript is used for the artemis API, our Timesketch client is created\nfrom scratch with the goal of trying to replicate the upload features of the\nPython API library"}),"\n",(0,n.jsx)(t.p,{children:"Some known limitations that have been observed:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Timelines get ",(0,n.jsx)(t.a,{href:"https://github.com/google/timesketch/issues/3052",children:"renamed"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:["Possible slowness if a timeline has alot of\n",(0,n.jsx)(t.a,{href:"https://github.com/google/timesketch/issues/3075",children:"data sources"})]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Possible workarounds:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"/artemis-api/docs/API/API%20Scenarios/timelines",children:"Timeline"})," your data to JSONL files. Combine them into one\nJSONL file. Then upload via WebUI"]}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,i.M)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},6628:(e,t,s)=>{s.d(t,{c:()=>n});const n=s.p+"assets/images/timesketch-b4238c16129bab022cb040fc1a157c34.png"},2172:(e,t,s)=>{s.d(t,{I:()=>a,M:()=>o});var n=s(1504);const i={},r=n.createContext(i);function o(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);