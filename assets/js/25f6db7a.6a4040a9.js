"use strict";(self.webpackChunkartemis_docs=self.webpackChunkartemis_docs||[]).push([[2259],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>k});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var c=n.createContext({}),d=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(c.Provider,{value:t},e.children)},s="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,l=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),s=d(a),u=o,k=s["".concat(c,".").concat(u)]||s[u]||m[u]||l;return a?n.createElement(k,r(r({ref:t},p),{},{components:a})):n.createElement(k,r({ref:t},p))}));function k(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=a.length,r=new Array(l);r[0]=u;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[s]="string"==typeof e?e:o,r[1]=i;for(var d=2;d<l;d++)r[d]=a[d];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},771:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var n=a(7462),o=(a(7294),a(3905));const l={sidebar_position:4,description:"Uploading to the cloud"},r="Remote Uploads",i={unversionedId:"Intro/Collections/uploads",id:"Intro/Collections/uploads",title:"Remote Uploads",description:"Uploading to the cloud",source:"@site/docs/Intro/Collections/uploads.md",sourceDirName:"Intro/Collections",slug:"/Intro/Collections/uploads",permalink:"/artemis-api/docs/Intro/Collections/uploads",draft:!1,editUrl:"https://github.com/puffyCid/artemis-api/tree/main/artemis-docs/docs/Intro/Collections/uploads.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,description:"Uploading to the cloud"},sidebar:"artemisStart",previous:{title:"Output Formats",permalink:"/artemis-api/docs/Intro/Collections/output"},next:{title:"Examples",permalink:"/artemis-api/docs/category/examples"}},c={},d=[],p={toc:d},s="wrapper";function m(e){let{components:t,...a}=e;return(0,o.kt)(s,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"remote-uploads"},"Remote Uploads"),(0,o.kt)("p",null,"artemis has basic support for uploading collections to three (3) external cloud\nservices:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Google Cloud Platform (GCP)"),(0,o.kt)("li",{parentName:"ol"},"Microsoft Azure"),(0,o.kt)("li",{parentName:"ol"},"Amazon Web Services (AWS)")),(0,o.kt)("p",null,"Uploading collections to a remote serivce requires three (3) steps:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Name of remote service. Valid options are: ",(0,o.kt)("inlineCode",{parentName:"li"},'"gcp", "azure", "aws"')),(0,o.kt)("li",{parentName:"ol"},"URL to the remote service"),(0,o.kt)("li",{parentName:"ol"},"A base64 encoded API key formatted based on the remote service selected in\nstep 1.")),(0,o.kt)("p",null,"An example TOML Collection is below:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},'system = "windows"\n\n[output]\nname = "shimcache_collection"\ndirectory = "hostname"\nformat = "json"\ncompress = true\nendpoint_id = "6c51b123-1522-4572-9f2a-0bd5abd81b82"\ncollection_id = 1\noutput = "gcp"\nurl = "https://storage.googleapis.com/upload/storage/v1/b/<INSERT BUCKET NAME>" # Make sure to include GCP Bucket name\napi_key = "ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAiZmFrZW1lIiwKICAicHJpdmF0ZV9rZXlfaWQiOiAiZmFrZW1lIiwKICAicHJpdmF0ZV9rZXkiOiAiLS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tXG5NSUlFdndJQkFEQU5CZ2txaGtpRzl3MEJBUUVGQUFTQ0JLa3dnZ1NsQWdFQUFvSUJBUUM3VkpUVXQ5VXM4Y0tqTXpFZll5amlXQTRSNC9NMmJTMUdCNHQ3TlhwOThDM1NDNmRWTXZEdWljdEdldXJUOGpOYnZKWkh0Q1N1WUV2dU5Nb1NmbTc2b3FGdkFwOEd5MGl6NXN4alptU25YeUNkUEVvdkdoTGEwVnpNYVE4cytDTE95UzU2WXlDRkdlSlpxZ3R6SjZHUjNlcW9ZU1c5YjlVTXZrQnBaT0RTY3RXU05HajNQN2pSRkRPNVZvVHdDUUFXYkZuT2pEZkg1VWxncDJQS1NRblNKUDNBSkxRTkZOZTdicjFYYnJoVi8vZU8rdDUxbUlwR1NEQ1V2M0UwRERGY1dEVEg5Y1hEVFRsUlpWRWlSMkJ3cFpPT2tFL1owL0JWbmhaWUw3MW9aVjM0YktmV2pRSXQ2Vi9pc1NNYWhkc0FBU0FDcDRaVEd0d2lWdU5kOXR5YkFnTUJBQUVDZ2dFQkFLVG1qYVM2dGtLOEJsUFhDbFRRMnZwei9ONnV4RGVTMzVtWHBxYXNxc2tWbGFBaWRnZy9zV3FwalhEYlhyOTNvdElNTGxXc00rWDBDcU1EZ1NYS2VqTFMyang0R0RqSTFaVFhnKyswQU1KOHNKNzRwV3pWRE9mbUNFUS83d1hzMytjYm5YaEtyaU84WjAzNnE5MlFjMStOODdTSTM4bmtHYTBBQkg5Q044M0htUXF0NGZCN1VkSHp1SVJlL21lMlBHaElxNVpCemo2aDNCcG9QR3pFUCt4M2w5WW1LOHQvMWNOMHBxSStkUXdZZGdmR2phY2tMdS8ycUg4ME1DRjdJeVFhc2VaVU9KeUtyQ0x0U0QvSWl4di9oekRFVVBmT0NqRkRnVHB6ZjNjd3RhOCtvRTR3SENvMWlJMS80VGxQa3dtWHg0cVNYdG13NGFRUHo3SURRdkVDZ1lFQThLTlRoQ08yZ3NDMkk5UFFETS84Q3cwTzk4M1dDRFkrb2krN0pQaU5BSnd2NURZQnFFWkIxUVlkajA2WUQxNlhsQy9IQVpNc01rdTFuYTJUTjBkcml3ZW5RUVd6b2V2M2cyUzdnUkRvUy9GQ0pTSTNqSitramd0YUE3UW16bGdrMVR4T0ROK0cxSDkxSFc3dDBsN1ZuTDI3SVd5WW8ycVJSSzNqenhxVWlQVUNnWUVBeDBvUXMycmVCUUdNVlpuQXBEMWplcTduNE12TkxjUHZ0OGIvZVU5aVV2Nlk0TWowU3VvL0FVOGxZWlhtOHViYnFBbHd6MlZTVnVuRDJ0T3BsSHlNVXJ0Q3RPYkFmVkRVQWhDbmRLYUE5Z0FwZ2ZiM3h3MUlLYnVRMXU0SUYxRkpsM1Z0dW1mUW4vL0xpSDFCM3JYaGNkeW8zL3ZJdHRFazQ4UmFrVUtDbFU4Q2dZRUF6VjdXM0NPT2xERGNRZDkzNURkdEtCRlJBUFJQQWxzcFFVbnpNaTVlU0hNRC9JU0xEWTVJaVFIYklIODNENGJ2WHEwWDdxUW9TQlNOUDdEdnYzSFl1cU1oZjBEYWVncmxCdUpsbEZWVnE5cVBWUm5LeHQxSWwySGd4T0J2YmhPVCs5aW4xQnpBK1lKOTlVekM4NU8wUXowNkErQ210SEV5NGFaMmtqNWhIakVDZ1lFQW1OUzQrQThGa3NzOEpzMVJpZUsyTG5pQnhNZ21ZbWwzcGZWTEtHbnptbmc3SDIrY3dQTGhQSXpJdXd5dFh5d2gyYnpic1lFZll4M0VvRVZnTUVwUGhvYXJRbllQdWtySk80Z3dFMm81VGU2VDVtSlNaR2xRSlFqOXE0WkIyRGZ6ZXQ2SU5zSzBvRzhYVkdYU3BRdlFoM1JVWWVrQ1pRa0JCRmNwcVdwYklFc0NnWUFuTTNEUWYzRkpvU25YYU1oclZCSW92aWM1bDB4RmtFSHNrQWpGVGV2Tzg2RnN6MUMyYVNlUktTcUdGb09RMHRtSnpCRXMxUjZLcW5ISW5pY0RUUXJLaEFyZ0xYWDR2M0NkZGpmVFJKa0ZXRGJFL0NrdktaTk9yY2YxbmhhR0NQc3BSSmoyS1VrajFGaGw5Q25jZG4vUnNZRU9OYndRU2pJZk1Qa3Z4Ris4SFE9PVxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwKICAiY2xpZW50X2VtYWlsIjogImZha2VAZ3NlcnZpY2VhY2NvdW50LmNvbSIsCiAgImNsaWVudF9pZCI6ICJmYWtlbWUiLAogICJhdXRoX3VyaSI6ICJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvYXV0aCIsCiAgInRva2VuX3VyaSI6ICJodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlbiIsCiAgImF1dGhfcHJvdmlkZXJfeDUwOV9jZXJ0X3VybCI6ICJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjEvY2VydHMiLAogICJjbGllbnRfeDUwOV9jZXJ0X3VybCI6ICJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9yb2JvdC92MS9tZXRhZGF0YS94NTA5L2Zha2VtZSIsCiAgInVuaXZlcnNlX2RvbWFpbiI6ICJnb29nbGVhcGlzLmNvbSIKfQo="\n\n[[artifacts]]\nartifact_name = "shimcache"\n[artifacts.shimcache]\n')),(0,o.kt)("admonition",{type:"warning"},(0,o.kt)("p",{parentName:"admonition"},"Currently artemis does not securely protect the remote API key. Make sure the\naccount associated with the API has only permissions needed by artemis. The only\npermissions artemis requires is the ability create/write data to a bucket."),(0,o.kt)("p",{parentName:"admonition"},"In addition, make sure the account only has access to a dedicated bucket for\nartemis."),(0,o.kt)("p",{parentName:"admonition"},"For example:"),(0,o.kt)("ol",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ol"},"Create a bucket called ",(0,o.kt)("inlineCode",{parentName:"li"},"artemis-uploads")),(0,o.kt)("li",{parentName:"ol"},"Create an an account called ",(0,o.kt)("inlineCode",{parentName:"li"},"artemis-uploader")," and generate an API key"),(0,o.kt)("li",{parentName:"ol"},"Only allow the account ",(0,o.kt)("inlineCode",{parentName:"li"},"artemis-uploader")," to upload data to\n",(0,o.kt)("inlineCode",{parentName:"li"},"artemis-uploads"),". It has no other access.")),(0,o.kt)("p",{parentName:"admonition"},"If you do not want to expose the remote API key, you can output the data to a\nlocal directory, network share, or external drive. Then upload the data using an\nalternative tool.")),(0,o.kt)("h1",{id:"gcp"},"GCP"),(0,o.kt)("p",null,"The GCP upload process is based on the upload process Velociraptor uses\n",(0,o.kt)("a",{parentName:"p",href:"https://velociraptor.velocidex.com/triage-with-velociraptor-pt-3-d6f63215f579"},"https://velociraptor.velocidex.com/triage-with-velociraptor-pt-3-d6f63215f579"),"."),(0,o.kt)("p",null,"High Level Steps:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Create a bucket. Make sure the bucket is ",(0,o.kt)("strong",{parentName:"li"},"not")," public. This bucket will\nhold the data uploaded by artemis."),(0,o.kt)("li",{parentName:"ol"},"Create a service account with no permissions."),(0,o.kt)("li",{parentName:"ol"},"Create and download the service account key. This should be a JSON file."),(0,o.kt)("li",{parentName:"ol"},"Assign the service account access to the newly created bucket. The service\naccount should only need ",(0,o.kt)("strong",{parentName:"li"},"Storage Object Creator")),(0,o.kt)("li",{parentName:"ol"},"Base64 encode the service account JSON file"),(0,o.kt)("li",{parentName:"ol"},"Create TOML collection and use\n",(0,o.kt)("inlineCode",{parentName:"li"},"https://storage.googleapis.com/upload/storage/v1/b/<BUCKETNAME>")," for your\n",(0,o.kt)("inlineCode",{parentName:"li"},"url"),". Use the base64 encoded string from step 5 as your ",(0,o.kt)("inlineCode",{parentName:"li"},"api_key")),(0,o.kt)("li",{parentName:"ol"},"Execute artemis and provide TOML collection as either file or base64 encoded\nargument"),(0,o.kt)("li",{parentName:"ol"},"Delete the service account key once you are done collecting data using\nartemis")),(0,o.kt)("p",null,"An example TOML Collection is below:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},'system = "windows"\n\n[output]\nname = "shimcache_collection"\ndirectory = "dev-workstations"\nformat = "jsonl"\ncompress = true\nendpoint_id = "6c51b123-1522-4572-9f2a-0bd5abd81b82"\ncollection_id = 1\noutput = "gcp"\nurl = "https://storage.googleapis.com/upload/storage/v1/b/shimcache-gcp-bucket" # Make sure to include GCP Bucket name\napi_key = "ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAiZmFrZW1lIiwKICAicHJpdmF0ZV9rZXlfaWQiOiAiZmFrZW1lIiwKICAicHJpdmF0ZV9rZXkiOiAiLS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tXG5NSUlFdndJQkFEQU5CZ2txaGtpRzl3MEJBUUVGQUFTQ0JLa3dnZ1NsQWdFQUFvSUJBUUM3VkpUVXQ5VXM4Y0tqTXpFZll5amlXQTRSNC9NMmJTMUdCNHQ3TlhwOThDM1NDNmRWTXZEdWljdEdldXJUOGpOYnZKWkh0Q1N1WUV2dU5Nb1NmbTc2b3FGdkFwOEd5MGl6NXN4alptU25YeUNkUEVvdkdoTGEwVnpNYVE4cytDTE95UzU2WXlDRkdlSlpxZ3R6SjZHUjNlcW9ZU1c5YjlVTXZrQnBaT0RTY3RXU05HajNQN2pSRkRPNVZvVHdDUUFXYkZuT2pEZkg1VWxncDJQS1NRblNKUDNBSkxRTkZOZTdicjFYYnJoVi8vZU8rdDUxbUlwR1NEQ1V2M0UwRERGY1dEVEg5Y1hEVFRsUlpWRWlSMkJ3cFpPT2tFL1owL0JWbmhaWUw3MW9aVjM0YktmV2pRSXQ2Vi9pc1NNYWhkc0FBU0FDcDRaVEd0d2lWdU5kOXR5YkFnTUJBQUVDZ2dFQkFLVG1qYVM2dGtLOEJsUFhDbFRRMnZwei9ONnV4RGVTMzVtWHBxYXNxc2tWbGFBaWRnZy9zV3FwalhEYlhyOTNvdElNTGxXc00rWDBDcU1EZ1NYS2VqTFMyang0R0RqSTFaVFhnKyswQU1KOHNKNzRwV3pWRE9mbUNFUS83d1hzMytjYm5YaEtyaU84WjAzNnE5MlFjMStOODdTSTM4bmtHYTBBQkg5Q044M0htUXF0NGZCN1VkSHp1SVJlL21lMlBHaElxNVpCemo2aDNCcG9QR3pFUCt4M2w5WW1LOHQvMWNOMHBxSStkUXdZZGdmR2phY2tMdS8ycUg4ME1DRjdJeVFhc2VaVU9KeUtyQ0x0U0QvSWl4di9oekRFVVBmT0NqRkRnVHB6ZjNjd3RhOCtvRTR3SENvMWlJMS80VGxQa3dtWHg0cVNYdG13NGFRUHo3SURRdkVDZ1lFQThLTlRoQ08yZ3NDMkk5UFFETS84Q3cwTzk4M1dDRFkrb2krN0pQaU5BSnd2NURZQnFFWkIxUVlkajA2WUQxNlhsQy9IQVpNc01rdTFuYTJUTjBkcml3ZW5RUVd6b2V2M2cyUzdnUkRvUy9GQ0pTSTNqSitramd0YUE3UW16bGdrMVR4T0ROK0cxSDkxSFc3dDBsN1ZuTDI3SVd5WW8ycVJSSzNqenhxVWlQVUNnWUVBeDBvUXMycmVCUUdNVlpuQXBEMWplcTduNE12TkxjUHZ0OGIvZVU5aVV2Nlk0TWowU3VvL0FVOGxZWlhtOHViYnFBbHd6MlZTVnVuRDJ0T3BsSHlNVXJ0Q3RPYkFmVkRVQWhDbmRLYUE5Z0FwZ2ZiM3h3MUlLYnVRMXU0SUYxRkpsM1Z0dW1mUW4vL0xpSDFCM3JYaGNkeW8zL3ZJdHRFazQ4UmFrVUtDbFU4Q2dZRUF6VjdXM0NPT2xERGNRZDkzNURkdEtCRlJBUFJQQWxzcFFVbnpNaTVlU0hNRC9JU0xEWTVJaVFIYklIODNENGJ2WHEwWDdxUW9TQlNOUDdEdnYzSFl1cU1oZjBEYWVncmxCdUpsbEZWVnE5cVBWUm5LeHQxSWwySGd4T0J2YmhPVCs5aW4xQnpBK1lKOTlVekM4NU8wUXowNkErQ210SEV5NGFaMmtqNWhIakVDZ1lFQW1OUzQrQThGa3NzOEpzMVJpZUsyTG5pQnhNZ21ZbWwzcGZWTEtHbnptbmc3SDIrY3dQTGhQSXpJdXd5dFh5d2gyYnpic1lFZll4M0VvRVZnTUVwUGhvYXJRbllQdWtySk80Z3dFMm81VGU2VDVtSlNaR2xRSlFqOXE0WkIyRGZ6ZXQ2SU5zSzBvRzhYVkdYU3BRdlFoM1JVWWVrQ1pRa0JCRmNwcVdwYklFc0NnWUFuTTNEUWYzRkpvU25YYU1oclZCSW92aWM1bDB4RmtFSHNrQWpGVGV2Tzg2RnN6MUMyYVNlUktTcUdGb09RMHRtSnpCRXMxUjZLcW5ISW5pY0RUUXJLaEFyZ0xYWDR2M0NkZGpmVFJKa0ZXRGJFL0NrdktaTk9yY2YxbmhhR0NQc3BSSmoyS1VrajFGaGw5Q25jZG4vUnNZRU9OYndRU2pJZk1Qa3Z4Ris4SFE9PVxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwKICAiY2xpZW50X2VtYWlsIjogImZha2VAZ3NlcnZpY2VhY2NvdW50LmNvbSIsCiAgImNsaWVudF9pZCI6ICJmYWtlbWUiLAogICJhdXRoX3VyaSI6ICJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvYXV0aCIsCiAgInRva2VuX3VyaSI6ICJodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlbiIsCiAgImF1dGhfcHJvdmlkZXJfeDUwOV9jZXJ0X3VybCI6ICJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjEvY2VydHMiLAogICJjbGllbnRfeDUwOV9jZXJ0X3VybCI6ICJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9yb2JvdC92MS9tZXRhZGF0YS94NTA5L2Zha2VtZSIsCiAgInVuaXZlcnNlX2RvbWFpbiI6ICJnb29nbGVhcGlzLmNvbSIKfQo="\n\n[[artifacts]]\nartifact_name = "shimcache"\n[artifacts.shimcache]\n')),(0,o.kt)("h1",{id:"azure"},"Azure"),(0,o.kt)("p",null,"The Azure upload process is based on the Azure Blob upload process Velociraptor\nuses\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.velociraptor.app/docs/offline_triage/remote_uploads/"},"https://docs.velociraptor.app/docs/offline_triage/remote_uploads"),"."),(0,o.kt)("p",null,"High level steps:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Create a Storage Account"),(0,o.kt)("li",{parentName:"ol"},"Create a Container under the new Storage Account"),(0,o.kt)("li",{parentName:"ol"},"Add a Role Assignment to the Storage Account"),(0,o.kt)("li",{parentName:"ol"},"Generate a Shared Access Signature (SAS) Policy for the created Container in\nstep 2. Make sure to only allow create and write access"),(0,o.kt)("li",{parentName:"ol"},"Copy the Blob SAS URL"),(0,o.kt)("li",{parentName:"ol"},"Create a TOML collection and use the Blob SAS URL for the ",(0,o.kt)("inlineCode",{parentName:"li"},"url")," option"),(0,o.kt)("li",{parentName:"ol"},"Execute artemis and provide TOML collection as either file or base64 encoded\nargument")),(0,o.kt)("p",null,"An example TOML Collection is below:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},'system = "windows"\n\n[output]\nname = "shimcache_collection"\ndirectory = "dev-workstations"\nformat = "jsonl"\ncompress = true\nendpoint_id = "6c51b123-1522-4572-9f2a-0bd5abd81b82"\ncollection_id = 1\noutput = "gcp"\nurl = "https://uploadertest.blob.core.windows.net/uploads?sp=cw....." # Make sure to you copied the Blob SAS URL\n\n[[artifacts]]\nartifact_name = "shimcache"\n[artifacts.shimcache]\n')),(0,o.kt)("h1",{id:"aws"},"AWS"),(0,o.kt)("p",null,"The AWS upload is based on the upload process Velociraptor uses\n",(0,o.kt)("a",{parentName:"p",href:"https://docs.velociraptor.app/blog/2020/2020-07-14-triage-with-velociraptor-pt-4-cf0e60810d1e/"},"https://docs.velociraptor.app/blog/2020/2020-07-14-triage-with-velociraptor-pt-4-cf0e60810d1e")),(0,o.kt)("p",null,"High level steps:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Create a S3 bucket. Make sure the bucket is ",(0,o.kt)("strong",{parentName:"li"},"not")," public. This bucket will\nhold the data uploaded by artemis."),(0,o.kt)("li",{parentName:"ol"},"Create a new user. This user does ",(0,o.kt)("strong",{parentName:"li"},"not")," need access to the AWS Console"),(0,o.kt)("li",{parentName:"ol"},"Create a new policy.",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Only S3 PutObject permission is required"),(0,o.kt)("li",{parentName:"ul"},"Limit the policy to only apply to the created bucket in step 1."))),(0,o.kt)("li",{parentName:"ol"},"Create a new User Group. Add user created in step 2. Apply policy created in\nStep 3."),(0,o.kt)("li",{parentName:"ol"},"Create Access Keys for the user created in step 2. Create a JSON blob\nformatted like below:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "bucket": "yourbucketname",\n  "secret": "yoursecretfromyouraccount",\n  "key": "yourkeyfromyouraccount",\n  "region": "yourbucketregion"\n}\n')),(0,o.kt)("ol",{start:6},(0,o.kt)("li",{parentName:"ol"},"Create TOML collection and use ",(0,o.kt)("inlineCode",{parentName:"li"},"https://s3.amazonaws.com")," for your ",(0,o.kt)("inlineCode",{parentName:"li"},"url"),".\nBase64 encode the JSON blob from step 5 as your ",(0,o.kt)("inlineCode",{parentName:"li"},"api_key")),(0,o.kt)("li",{parentName:"ol"},"Execute artemis and provide TOML collection as either file or base64 encoded\nargument"),(0,o.kt)("li",{parentName:"ol"},"Delete the API key once you are done collecting data using artemis")),(0,o.kt)("p",null,"An example TOML Collection is below:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},'system = "windows"\n\n[output]\nname = "shimcache_collection"\ndirectory = "dev-workstations"\nformat = "jsonl"\ncompress = true\nendpoint_id = "6c51b123-1522-4572-9f2a-0bd5abd81b82"\ncollection_id = 1\noutput = "aws"\nurl = "https://s3.amazonaws.com"\napi_key = "ewogICAgImJ1Y2tldCI6ICJibGFoIiwKICAgICJzZWNyZXQiOiAicGtsNkFpQWFrL2JQcEdPenlGVW9DTC96SW1hSEoyTzVtR3ZzVWxSTCIsCiAgICAia2V5IjogIkFLSUEyT0dZQkFINlRPSUFVSk1SIiwKICAgICJyZWdpb24iOiAidXMtZWFzdC0yIgp9"\n\n[[artifacts]]\nartifact_name = "shimcache"\n[artifacts.shimcache]\n')))}m.isMDXComponent=!0}}]);