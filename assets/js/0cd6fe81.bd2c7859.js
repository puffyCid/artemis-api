"use strict";(self.webpackChunkartemis_docs=self.webpackChunkartemis_docs||[]).push([[5768],{26655:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"Artifacts/Windows Artfacts/usnjrnl","title":"UsnJrnl","description":"Tracks file changes","source":"@site/docs/Artifacts/Windows Artfacts/usnjrnl.md","sourceDirName":"Artifacts/Windows Artfacts","slug":"/Artifacts/Windows Artfacts/usnjrnl","permalink":"/artemis/docs/Artifacts/Windows Artfacts/usnjrnl","draft":false,"unlisted":false,"editUrl":"https://github.com/puffyCid/artemis-api/tree/main/artemis-docs/docs/Artifacts/Windows Artfacts/usnjrnl.md","tags":[],"version":"current","lastUpdatedBy":"puffyCid","lastUpdatedAt":1748155945000,"frontMatter":{"description":"Tracks file changes","keywords":["windows","file meta"]},"sidebar":"artemisArtifacts","previous":{"title":"Users","permalink":"/artemis/docs/Artifacts/Windows Artfacts/users"},"next":{"title":"WMI","permalink":"/artemis/docs/Artifacts/Windows Artfacts/wmipersist"}}');var r=t(74848),i=t(28453);const a={description:"Tracks file changes",keywords:["windows","file meta"]},c="UsnJrnl",l={},o=[];function d(e){const n={a:"a",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"usnjrnl",children:"UsnJrnl"})}),"\n",(0,r.jsxs)(n.p,{children:["Windows ",(0,r.jsx)(n.code,{children:"UsnJrnl"})," is a sparse binary file that tracks changes to files and\ndirectories. Located at the alternative data stream (ADS)\n",(0,r.jsx)(n.code,{children:"C:\\$Extend\\$UsnJrnl:$J"}),". Parsing this data can sometimes show files that have\nbeen deleted. However, depending on the file activity on the system entries in\nthe ",(0,r.jsx)(n.code,{children:"UsnJrnl"})," may get overwritten quickly."]}),"\n",(0,r.jsx)(n.p,{children:"Other Parsers:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.velociraptor.app/artifact_references/pages/windows.forensics.usn/",children:"Velociraptor"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"References:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/windows/win32/api/winioctl/ns-winioctl-usn_record_v2?redirectedfrom=MSDN",children:"UsnJrnl"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/libyal/libfsntfs/blob/main/documentation/New%20Technologies%20File%20System%20(NTFS).asciidoc#usn_change_journal",children:"Libyal"})}),"\n"]}),"\n",(0,r.jsx)(n.h1,{id:"toml-collection",children:"TOML Collection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[output]\nname = "usnjrnl_collection"\ndirectory = "./tmp"\nformat = "json"\ncompress = false\nendpoint_id = "6c51b123-1522-4572-9f2a-0bd5abd81b82"\ncollection_id = 1\noutput = "local"\ntimeline = false\n\n[[artifacts]]\nartifact_name = "usnjrnl"\n[artifacts.usnjrnl]\n# Optional\n# alt_drive = \'D\'\n# alt_path = ""\n'})}),"\n",(0,r.jsx)(n.h1,{id:"collection-options",children:"Collection Options"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"alt_drive"})," Expects a single character value. Will use an alternative drive\nletter when parsing ",(0,r.jsx)(n.code,{children:"UsnJrnl"}),". This configuration is ",(0,r.jsx)(n.strong,{children:"optional"}),". By default\nartemis will use the ",(0,r.jsx)(n.code,{children:"%systemdrive%"})," value (typically ",(0,r.jsx)(n.code,{children:"C"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"alt_path"})," Full path to $J file. This configuration is ",(0,r.jsx)(n.strong,{children:"optional"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h1,{id:"output-structure",children:"Output Structure"}),"\n",(0,r.jsxs)(n.p,{children:["An array of ",(0,r.jsx)(n.code,{children:"UsnJrnl"})," entries"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export interface UsnJrnl {\n  /**Entry number in the MFT */\n  mft_entry: number;\n  /**Sequence number in the MFT */\n  mft_sequence: number;\n  /**Parent entry number in the MFT */\n  parent_mft_entry: number;\n  /**Parent sequence number in the MFT */\n  parent_mft_sequence: number;\n  /**ID number in the Update Sequence Number Journal (UsnJrnl) */\n  update_sequence_number: number;\n  /**Timestamp of of entry update */\n  update_time: string;\n  /**Reason for update action */\n  update_reason: string;\n  /**Source information of the update */\n  update_source_flags: string;\n  /**Security ID associated with entry */\n  security_descriptor_id: number;\n  /**Attributes associate with entry */\n  file_attributes: string[];\n  /**Name associated with entry. Can be file or directory */\n  filename: string;\n  /**Extension if available for filename */\n  extension: string;\n  /**Full path for the UsnJrnl entry. Obtained by parsing `$MFT` and referencing the `parent_mft_entry` */\n  full_path: string;\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var s=t(96540);const r={},i=s.createContext(r);function a(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);